<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detalle de Evento | JASSO</title>

    <!-- Estilos -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="stylesheet" href="css/arteaga.css" />
  </head>

  <body>
    <div class="hero-section" id="hero-image">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <h1 class="publication-title" id="titulo"></h1>
        <div class="meta-tags">
          <span class="meta-tag">
            <i class="fas fa-calendar"></i>
            <span id="fecha"></span>
          </span>
          <span class="meta-tag">
            <i class="fas fa-tag"></i>
            <span id="categoria"></span>
          </span>
          <span class="meta-tag">
            <i class="fas fa-map-marker-alt"></i>
            <span id="lugar"></span>
          </span>
        </div>
      </div>
    </div>

    <div class="publication-detail">
      <div class="content-wrapper">
        <div class="left-column">
          <div class="main-content">
            <div class="publication-content" id="contenido"></div>
          </div>
          <div class="comments-section">
            <h3 class="comments-title">Comentarios</h3>
            <div class="comment-form">
              <div class="comment-input-wrapper">
                <div class="user-avatar" id="currentUserAvatar"></div>
                <textarea
                  id="commentText"
                  placeholder="Escribe tu comentario..."
                ></textarea>
              </div>
              <button id="submitComment" class="comment-btn">
                Publicar comentario
              </button>
            </div>
            <div class="comments-list" id="commentsList"></div>
          </div>
        </div>
      
   

        <div class="sidebar">
          <div class="info-card">
            <h3 class="info-title">Información del Evento</h3>
            <div class="info-item">
              <i class="fas fa-map-marker-alt"></i>
              <div>
                <strong>Ubicación</strong><br />
                <span id="lugar-sidebar"></span>
              </div>
            </div>
            <div class="info-item">
              <i class="fas fa-calendar-alt"></i>
              <div>
                <strong>Fecha</strong><br />
                <span id="fecha-sidebar"></span>
              </div>
            </div>
            <div class="info-item">
              <i class="fas fa-tag"></i>
              <div>
                <strong>Categoría</strong><br />
                <span id="categoria-sidebar"></span>
              </div>
            </div>
            <!--  <a href="#contacto" class="cta-button"> Solicitar Información </a>-->
          </div>

          <!-- Agregar después del primer info-card y antes de la galería -->
          <div class="info-card" id="comisiones-card" style="display: none">
            <h3 class="info-title">Información Financiera</h3>
            <div class="comisiones-container">
              <div class="info-item">
                <i class="fas fa-phone"></i>
                <div>
                  <strong>Comisión por Llamada</strong><br />
                  <span class="precio-texto" id="comision-llamada">$0</span>
                </div>
              </div>

              <div class="info-item">
                <i class="fas fa-user-tie"></i>
                <div>
                  <strong>Comisión de Líder</strong><br />
                  <span class="precio-texto" id="comision-lider">$0</span>
                </div>
              </div>

              <div class="info-item">
                <i class="fas fa-handshake"></i>
                <div>
                  <strong>Comisión de Venta</strong><br />
                  <span class="precio-texto" id="comision-venta">$0</span>
                </div>
              </div>

              <div class="info-item precio-total">
                <i class="fas fa-tag"></i>
                <div>
                  <strong>Precio del paquete</strong><br />
                  <span class="precio-texto destacado" id="precio-total"
                    >$0</span
                  >
                </div>
              </div>
            </div>
          </div>

         <!-- Sección de Galería -->
<div class="info-card" >
  <h3 class="info-title">Galería</h3>
  <div class="gallery" id="galeria-imagenes">
      <!-- Las imágenes se cargarán dinámicamente -->
  </div>
</div>

<!-- Sección de Material de Apoyo -->
<div class="info-card" id="material-card">
  <h3 class="info-title">Material de apoyo</h3>
  <p id="descripcion-material" class="material-description"></p>
  <div class="gallery" id="material-apoyo">
      <!-- El material de apoyo se cargará dinámicamente -->
  </div>
</div>
        </div>
      </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <div class="whatsapp-float" id="whatsapp-float" style="display: none">
      <i class="fab fa-whatsapp"></i>
    </div>
 
 
    
    
  
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        const publicacionId = urlParams.get("id");
        const tipoUsuario = urlParams.get("tipo");
        const whatsappFloat = document.getElementById("whatsapp-float");

        // Mostrar el botón solo si el usuario es asesor o admin
        if (
          tipoUsuario &&
          (tipoUsuario.toLowerCase() === "asesor" ||
            tipoUsuario.toLowerCase() === "admin")
        ) {
          whatsappFloat.style.display = "flex";
        }

        whatsappFloat.addEventListener("click", function () {
          const titulo = document.getElementById("titulo").textContent;
          const asesor = localStorage.getItem("userName");
          console.log(asesor);

          const mensaje = encodeURIComponent(
            `Hola, tu asesor(a): ${asesor} te invita a ver más información de ${titulo} en https://jassocompany.com/publicaciones/casaAntiguaAteaga.html?id=${publicacionId}&tipo=cliente`
          );

          // Abre WhatsApp en una nueva ventana
          window.open(`https://wa.me/?text=${mensaje}`, "_blank");
        });
      });
    </script>

    <script src="js/arteaga.js"></script>


  </body>
</html>
